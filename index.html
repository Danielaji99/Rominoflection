<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="Rominoflect" content="One Question per day" />
        <link rel="stylesheet" href="css/styles.css" />
        <title>Rominoflect</title>
    </head>
    <body>
        <!-- Main app container -->
        <main id="app">
            <!-- Header: Streak display -->
            <header id="header">
                <div id="streak-display">
                    <span id="current-streak">0</span>
                    <span> day streak</span>
                </div>

                <div style="display: flex; gap: 1rem; align-items: center">
                    <div id="longest-streak">
                        Longest: <span id="longest-streak-value">0</span> days
                    </div>

                    <!-- Theme toggle button -->
                    <button
                        id="theme-toggle"
                        aria-label="Toggle dark mode"
                        title="Toggle theme"
                    >
                        <span id="theme-icon">ðŸŒ™</span>
                    </button>
                </div>
            </header>

            <!-- Question section -->
            <section id="question-section">
                <h1 id="question-text">Loading your question...</h1>
                <time id="question-date"></time>
            </section>

            <!-- Reflection textarea -->
            <section id="reflection-section">
                <label for="reflection-input" class="visually-hidden">
                    Your reflection
                </label>
                <textarea
                    id="reflection-input"
                    placeholder="Take your time. Your thoughts are private and saved automatically."
                    rows="10"
                ></textarea>

                <!-- Auto-save indicator -->
                <div id="save-status" aria-live="polite">
                    <span id="save-message"></span>
                </div>
            </section>

            <footer id="footer">
                <button id="history-toggle">View Past Reflections</button>

                <details id="settings">
                    <summary>Settings & Data</summary>
                    <div class="settings-content">
                        <button id="export-data">Export All Data</button>

                        <label for="import-data-input" class="import-label">
                            Import Data
                            <input
                                type="file"
                                id="import-data-input"
                                accept=".json"
                                hidden
                            />
                        </label>

                        <button id="clear-data" class="danger-button">
                            Clear All Data
                        </button>

                        <p class="settings-note">
                            Your reflections are stored locally in your browser.
                            Export regularly to keep a backup.
                        </p>
                    </div>
                </details>
            </footer>
        </main>

        <!-- Hidden history panel (initially hidden with CSS) -->
        <aside id="history-panel" hidden>
            <header>
                <h2>Past Reflections</h2>
                <button id="history-close">Close</button>
            </header>
            <div id="history-list">
                <!-- Will be populated by JavaScript -->
            </div>
        </aside>

        <!-- Scripts load last so DOM is ready -->
        <script src="js/data.js"></script>
        <script src="js/state.js"></script>
        <script src="js/app.js"></script>
        <script src="js/ui.js"></script>
    </body>
</html>
